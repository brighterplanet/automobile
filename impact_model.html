<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>impact_model.rb</title>
  <link rel="stylesheet" href="http://jashkenas.github.com/docco/resources/docco.css">
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1667526-20']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <style type="text/css">
    td.docs h1 {
      margin-top: 0;
    }
    @media print {
      .code pre {
        white-space: pre-wrap;
      }
      .code {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      .code .highlight {
        margin-left: 15px;
        margin-right: 15px;
      }
    }
  </style>
</head>

<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>impact_model.rb</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-1'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-1">&#182;</a>
        </div>
        <p>Copyright Â© 2010 Brighter Planet.
See LICENSE for details.
Contact Brighter Planet for dual-license arrangements.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Automobile_impact_model'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Automobile_impact_model">&#182;</a>
        </div>
        <h2>Automobile impact model</h2>

<p>This model is used by the <a href="http://brighterplanet.com">Brighter Planet</a> <a href="http://impact.brighterplanet.com">CM1 web service</a> to calculate the impacts of an automobile, such as energy use and greenhouse gas emissions.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Timeframe'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Timeframe">&#182;</a>
        </div>
        <h4>Timeframe</h4>

<p>The model calculates impacts that occured during a particular time period (<code>timeframe</code>).
For example if the <code>timeframe</code> is February 2010, an automobile put into use (<code>acquisition</code>) in December 2009 and taken out of use (<code>retirement</code>) in March 2010 will have impacts because it was in use during January 2010.
An automobile put into use in March 2010 or taken out of use in January 2010 will have zero impacts, because it was not in use during February 2010.</p>

<p>The default <code>timeframe</code> is the current calendar year.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Calculations'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Calculations">&#182;</a>
        </div>
        <h4>Calculations</h4>

<p>The final impacts are the result of the calculations below. These are performed in reverse order, starting with the last calculation listed and finishing with the greenhouse gas emissions calculation.</p>

<p>Each calculation listing shows:</p>

<ul>
<li>value returned (<em>units of measurement</em>)</li>
<li>description of the value</li>
<li>calculation methods, listed from most to least preferred</li>
</ul>


<p>Some methods use <code>values</code> returned by prior calculations. If any of these <code>values</code> are unknown the method is skipped.
If all the methods for a calculation are skipped, the value the calculation would return is unknown.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Standard_compliance'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Standard_compliance">&#182;</a>
        </div>
        <h4>Standard compliance</h4>

<p>When compliance with a particular standard is requested, all methods that do not comply with that standard are ignored.
Thus any <code>values</code> a method needs will have been calculated using a compliant method or will be unknown.
To see which standards a method complies with, look at the <code>:complies =&gt;</code> section of the code in the right column.</p>

<p>Client input complies with all standards.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Collaboration'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Collaboration">&#182;</a>
        </div>
        <h4>Collaboration</h4>

<p>Contributions to this impact model are actively encouraged and warmly welcomed. This library includes a comprehensive test suite to ensure that your changes do not cause regressions. All changes should include test coverage for new functionality. Please see <a href="https://github.com/brighterplanet/sniff#readme">sniff</a>, our emitter testing framework, for more information.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="k">module</span> <span class="nn">BrighterPlanet</span>
  <span class="k">module</span> <span class="nn">Automobile</span>
    <span class="k">module</span> <span class="nn">ImpactModel</span>
      <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">included</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
        <span class="n">base</span><span class="o">.</span><span class="n">decide</span> <span class="ss">:impact</span><span class="p">,</span> <span class="ss">:with</span> <span class="o">=&gt;</span> <span class="ss">:characteristics</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-7'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-7">&#182;</a>
        </div>
        <hr />
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Carbon_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Carbon_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Carbon (<em>kg CO<sub>2</sub>e</em>)</h3>

<p><em>The automobile&rsquo;s total anthropogenic greenhouse gas emissions during <code>active subtimeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:carbon</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-9'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-9">&#182;</a>
        </div>
        <p>Sum <code>co2 emission</code> (<em>kg</em>), <code>ch4 emission</code> (<em>kg CO<sub>2</sub>e</em>), <code>n2o emission</code> (<em>kg CO<sub>2</sub>e</em>), and <code>hfc emission</code> (<em>kg CO<sub>2</sub>e</em>) to give <em>kg CO<sub>2</sub>e</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from co2 emission, ch4 emission, n2o emission, and hfc emission&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:co2_emission</span><span class="p">,</span> <span class="ss">:ch4_emission</span><span class="p">,</span> <span class="ss">:n2o_emission</span><span class="p">,</span> <span class="ss">:hfc_emission</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:co2_emission</span><span class="o">]</span> <span class="o">+</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:ch4_emission</span><span class="o">]</span> <span class="o">+</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:n2o_emission</span><span class="o">]</span> <span class="o">+</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:hfc_emission</span><span class="o">]</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-CO&lt;sub&gt;2&lt;/sub&gt;_emission_(&lt;em&gt;kg&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO&lt;sub&gt;2&lt;/sub&gt;_emission_(&lt;em&gt;kg&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>CO<sub>2</sub> emission (<em>kg</em>)</h3>

<p><em>The automobile&rsquo;s CO<sub>2</sub> emissions from anthropogenic sources during <code>active subtimeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:co2_emission</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-11'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-11">&#182;</a>
        </div>
        <p>Multiply <code>fuel use</code> (<em>l</em>) by the <code>automobile fuel</code> co2 emission factor (<em>kg / l</em>) to give <em>kg</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel use and automobile fuel&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:fuel_use</span><span class="p">,</span> <span class="ss">:automobile_fuel</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_use</span><span class="o">]</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:automobile_fuel</span><span class="o">].</span><span class="n">co2_emission_factor</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-CO&lt;sub&gt;2&lt;/sub&gt;_biogenic_emission_(&lt;em&gt;kg&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO&lt;sub&gt;2&lt;/sub&gt;_biogenic_emission_(&lt;em&gt;kg&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>CO<sub>2</sub> biogenic emission (<em>kg</em>)</h3>

<p><em>The automobile&rsquo;s CO<sub>2</sub> emissions from biogenic sources during <code>active subtimeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:co2_biogenic_emission</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-13'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-13">&#182;</a>
        </div>
        <p>Multiply <code>fuel use</code> (<em>l</em>) by the <code>automobile fuel</code> co2 biogenic emission factor (<em>kg / l</em>) to give <em>kg</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel use and automobile fuel&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:fuel_use</span><span class="p">,</span> <span class="ss">:automobile_fuel</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_use</span><span class="o">]</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:automobile_fuel</span><span class="o">].</span><span class="n">co2_biogenic_emission_factor</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-CH&lt;sub&gt;4&lt;/sub&gt;_emission_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CH&lt;sub&gt;4&lt;/sub&gt;_emission_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>CH<sub>4</sub> emission (<em>kg CO<sub>2</sub>e</em>)</h3>

<p><em>The automobile&rsquo;s CH<sub>4</sub> emissions during <code>active subtimeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:ch4_emission</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-15'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-15">&#182;</a>
        </div>
        <p>Multiply <code>fuel use</code> (<em>l</em>) by the <code>automobile fuel</code> ch4 emission factor (<em>kg CO<sub>2</sub>e / l</em>) to give <em>kg CO<sub>2</sub>e</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel use and automobile fuel&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:fuel_use</span><span class="p">,</span> <span class="ss">:automobile_fuel</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_use</span><span class="o">]</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:automobile_fuel</span><span class="o">].</span><span class="n">ch4_emission_factor</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-N&lt;sub&gt;2&lt;/sub&gt;O_emission_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-N&lt;sub&gt;2&lt;/sub&gt;O_emission_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>N<sub>2</sub>O emission (<em>kg CO<sub>2</sub>e</em>)</h3>

<p><em>The automobile&rsquo;s N<sub>2</sub>O emissions during <code>active subtimeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:n2o_emission</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-17'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-17">&#182;</a>
        </div>
        <p>Multiply <code>fuel use</code> (<em>l</em>) by the <code>automobile fuel</code> n2o emission factor (<em>kg CO<sub>2</sub>e / l</em>) to give <em>kg CO<sub>2</sub>e</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel use and automobile fuel&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:fuel_use</span><span class="p">,</span> <span class="ss">:automobile_fuel</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_use</span><span class="o">]</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:automobile_fuel</span><span class="o">].</span><span class="n">n2o_emission_factor</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-HFC_emission_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-HFC_emission_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>HFC emission (<em>kg CO<sub>2</sub>e</em>)</h3>

<p><em>The automobile&rsquo;s HFC emissions during <code>active subtimeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:hfc_emission</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-19'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-19">&#182;</a>
        </div>
        <p>Multiply <code>fuel use</code> (<em>l</em>) by the <code>automobile fuel</code> hfc emission factor (<em>kg CO<sub>2</sub>e / l</em>) to give <em>kg CO<sub>2</sub>e</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel use and automobile fuel&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:fuel_use</span><span class="p">,</span> <span class="ss">:automobile_fuel</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_use</span><span class="o">]</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:automobile_fuel</span><span class="o">].</span><span class="n">hfc_emission_factor</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Energy_(&lt;em&gt;MJ&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Energy_(&lt;em&gt;MJ&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Energy (<em>MJ</em>)</h3>

<p><em>The automobile&rsquo;s energy use during <code>active subtimeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:energy</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-21'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-21">&#182;</a>
        </div>
        <p>Multiply <code>fuel use</code> (<em>l</em>) by the <code>automobile fuel</code> energy content (<em>MJ / l</em>) to give <em>MJ</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel use and automobile fuel&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:fuel_use</span><span class="p">,</span> <span class="ss">:automobile_fuel</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
              <span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_use</span><span class="o">]</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:automobile_fuel</span><span class="o">].</span><span class="n">energy_content</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Fuel_use_(&lt;em&gt;l&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Fuel_use_(&lt;em&gt;l&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Fuel use (<em>l</em>)</h3>

<p><em>The automobile&rsquo;s fuel use during <code>active subtimeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:fuel_use</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-23'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-23">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-24'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-24">&#182;</a>
        </div>
        <p>Otherwise divide <code>distance</code> (<em>km</em>) by <code>fuel efficiency</code> (<em>km / l</em>) to give <em>l</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel efficiency and distance&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:fuel_efficiency</span><span class="p">,</span> <span class="ss">:distance</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:distance</span><span class="o">]</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_efficiency</span><span class="o">]</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Distance_(&lt;em&gt;km&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Distance_(&lt;em&gt;km&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Distance (<em>km</em>)</h3>

<p><em>The distance the automobile travelled during <code>active subtimeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:distance</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-26'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-26">&#182;</a>
        </div>
        <p>Multiply <code>annual distance</code> (<em>km</em>) by the fraction of the calendar year in which <code>timeframe</code> falls that overlaps with <code>active subtimeframe</code> to give <em>km</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from annual distance&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:annual_distance</span><span class="p">,</span> <span class="ss">:active_subtimeframe</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:annual_distance</span><span class="o">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:active_subtimeframe</span><span class="o">]</span> <span class="o">/</span> <span class="n">timeframe</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Annual_distance_(&lt;em&gt;km&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Annual_distance_(&lt;em&gt;km&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Annual distance (<em>km</em>)</h3>

<p><em>The distance the automobile would travel if it were used for the entire calendar year in which <code>timeframe</code> falls.</em>
Note that this will be <strong>more</strong> than the actual distance traveled if the automobile was not in use for the entire calendar year (if either <code>acquisition</code> or <code>retirement</code> occurs during the calendar year in which <code>timeframe</code> falls).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:annual_distance</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-28'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-28">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-29'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-29">&#182;</a>
        </div>
        <p>Otherwise divide <code>weekly distance</code> (<em>km</em>) by 7 and multiply by the number of days in the calendar year in which <code>timeframe</code> falls to give <em>km</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from weekly distance and timeframe&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:weekly_distance</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">|</span>
                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:weekly_distance</span><span class="o">]</span> <span class="o">/</span> <span class="mi">7</span> <span class="p">)</span> <span class="o">*</span> <span class="n">timeframe</span><span class="o">.</span><span class="n">year</span><span class="o">.</span><span class="n">days</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-30'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-30">&#182;</a>
        </div>
        <p>Otherwise multiply <code>daily distance</code> (<em>km</em>) by the number of days in the calendar year in which <code>timeframe</code> falls to give <em>km</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from daily distance and timeframe&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:daily_distance</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:daily_distance</span><span class="o">]</span> <span class="o">*</span> <span class="n">timeframe</span><span class="o">.</span><span class="n">year</span><span class="o">.</span><span class="n">days</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-31'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-31">&#182;</a>
        </div>
        <p>Otherwise divide <code>daily duration</code> (<em>seconds</em>) by 3600 (<em>seconds / hour</em>) and multiply by <code>speed</code> (<em>km / hour</em>) to give <em>km</em>.
Multiply by the number of days in the calendar year in which <code>timeframe</code> falls to give <em>km</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from daily duration, speed, and timeframe&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:daily_duration</span><span class="p">,</span> <span class="ss">:speed</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:daily_duration</span><span class="o">]</span> <span class="o">/</span> <span class="mi">3600</span><span class="o">.</span><span class="mi">0</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:speed</span><span class="o">]</span> <span class="o">*</span> <span class="n">timeframe</span><span class="o">.</span><span class="n">year</span><span class="o">.</span><span class="n">days</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-32'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-32">&#182;</a>
        </div>
        <p>Otherwise use the <code>size class</code> annual distance (<em>km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from size class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:size_class</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:size_class</span><span class="o">].</span><span class="n">annual_distance</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-33'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-33">&#182;</a>
        </div>
        <p>Otherwise use the <code>automobile fuel</code> annual distance (<em>km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from automobile fuel&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:automobile_fuel</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:automobile_fuel</span><span class="o">].</span><span class="n">annual_distance</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Weekly_distance_(&lt;em&gt;km&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Weekly_distance_(&lt;em&gt;km&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Weekly distance (<em>km</em>)</h3>

<p><em>The average distance the automobile is driven each week.</em></p>

<p>Use client input if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Daily_distance_(&lt;em&gt;km&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Daily_distance_(&lt;em&gt;km&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Daily distance (<em>km</em>)</h3>

<p><em>The average distance the automobile is driven each day.</em></p>

<p>Use client input if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Daily_duration_(&lt;em&gt;seconds&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Daily_duration_(&lt;em&gt;seconds&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Daily duration (<em>seconds</em>)</h3>

<p><em>The average time the automobile is driven each day.</em></p>

<p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Automobile_fuel'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Automobile_fuel">&#182;</a>
        </div>
        <h3>Automobile fuel</h3>

<p><em>The automobile&rsquo;s <a href="http://data.brighterplanet.com/automobile_fuels">fuel type</a>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:automobile_fuel</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-38'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-38">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-39'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-39">&#182;</a>
        </div>
        <p>Otherwise use the <code>make model year</code> <a href="http://data.brighterplanet.com/automobile_fuels">automobile fuel</a>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from make model year&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:make_model_year</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:make_model_year</span><span class="o">].</span><span class="n">automobile_fuel</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-40'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-40">&#182;</a>
        </div>
        <p>Otherwise use the average <a href="http://data.brighterplanet.com/automobile_fuels">automobile fuel</a>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="no">AutomobileFuel</span><span class="o">.</span><span class="n">fallback</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Speed_(&lt;em&gt;km_/_hour&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Speed_(&lt;em&gt;km_/_hour&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Speed (<em>km / hour</em>)</h3>

<p><em>The automobile&rsquo;s average speed.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:speed</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-42'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-42">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-43'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-43">&#182;</a>
        </div>
        <p>Otherwise look up the <a href="http://data.brighterplanet.com/countries">United States</a> average automobile city speed (<em>km / hour</em>) and automobile highway speed (<em>km / hour</em>).
Calculate the harmonic mean of those speeds weighted by <code>urbanity</code> to give <em>km / hour</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from urbanity&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:urbanity</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:urbanity</span><span class="o">]</span> <span class="o">/</span> <span class="no">Country</span><span class="o">.</span><span class="n">united_states</span><span class="o">.</span><span class="n">automobile_city_speed</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:urbanity</span><span class="o">]</span><span class="p">)</span> <span class="o">/</span> <span class="no">Country</span><span class="o">.</span><span class="n">united_states</span><span class="o">.</span><span class="n">automobile_highway_speed</span><span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Fuel_efficiency_(&lt;em&gt;km_/_l&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Fuel_efficiency_(&lt;em&gt;km_/_l&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Fuel efficiency (<em>km / l</em>)</h3>

<p><em>The automobile&rsquo;s fuel efficiency.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:fuel_efficiency</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-45'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-45">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-46'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-46">&#182;</a>
        </div>
        <p>Otherwise look up the <code>make model year</code> fuel efficiency city (<em>km / l</em>) and fuel efficiency highway (<em>km / l</em>).
Calculate the harmonic mean of those fuel efficiencies, weighted by <code>urbanity</code>, to give <em>km / l</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from make model year and urbanity&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:make_model_year</span><span class="p">,</span> <span class="ss">:urbanity</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="mi">1</span><span class="o">.</span><span class="mi">0</span> <span class="o">/</span> <span class="p">(</span>
                  <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:urbanity</span><span class="o">]</span>         <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:make_model_year</span><span class="o">].</span><span class="n">fuel_efficiency_city</span><span class="p">)</span> <span class="o">+</span>
                  <span class="p">((</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:urbanity</span><span class="o">]</span><span class="p">)</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:make_model_year</span><span class="o">].</span><span class="n">fuel_efficiency_highway</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-47'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-47">&#182;</a>
        </div>
        <p>Otherwise look up the <code>make model</code> fuel efficiency city (<em>km / l</em>) and fuel efficiency highway (<em>km / l</em>).
Calculate the harmonic mean of those fuel efficiencies, weighted by <code>urbanity</code>, to give <em>km / l</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from make model and urbanity&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:make_model</span><span class="p">,</span> <span class="ss">:urbanity</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="mi">1</span><span class="o">.</span><span class="mi">0</span> <span class="o">/</span> <span class="p">(</span>
                  <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:urbanity</span><span class="o">]</span>         <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:make_model</span><span class="o">].</span><span class="n">fuel_efficiency_city</span><span class="p">)</span> <span class="o">+</span>
                  <span class="p">((</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:urbanity</span><span class="o">]</span><span class="p">)</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:make_model</span><span class="o">].</span><span class="n">fuel_efficiency_highway</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-48'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-48">&#182;</a>
        </div>
        <p>Otherwise look up the <code>size class</code> fuel efficiency city (<em>km / l</em>) and fuel efficiency highway (<em>km / l</em>).
Calculate the harmonic mean of those fuel efficiencies, weighted by <code>urbanity</code>, to give <em>km / l</em>.
Multiply by <code>hybridity multiplier</code> to give <em>km / l</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from size class, hybridity multiplier, and urbanity&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:size_class</span><span class="p">,</span> <span class="ss">:hybridity_multiplier</span><span class="p">,</span> <span class="ss">:urbanity</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span> <span class="o">/</span> <span class="p">(</span>
                  <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:urbanity</span><span class="o">]</span>         <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:size_class</span><span class="o">].</span><span class="n">fuel_efficiency_city</span><span class="p">)</span> <span class="o">+</span>
                  <span class="p">((</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:urbanity</span><span class="o">]</span><span class="p">)</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:size_class</span><span class="o">].</span><span class="n">fuel_efficiency_highway</span><span class="p">)</span>
                <span class="p">))</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:hybridity_multiplier</span><span class="o">]</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-49'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-49">&#182;</a>
        </div>
        <p>Otherwise look up the <code>make year</code> fuel efficiency (<em>km / l</em>).
Multiply by <code>hybridity multiplier</code> to give <em>km / l</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from make year and hybridity multiplier&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:make_year</span><span class="p">,</span> <span class="ss">:hybridity_multiplier</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:make_year</span><span class="o">].</span><span class="n">fuel_efficiency</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:hybridity_multiplier</span><span class="o">]</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-50'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-50">&#182;</a>
        </div>
        <p>Otherwise look up the <code>make</code> fuel efficiency (<em>km / l</em>).
Multiply by <code>hybridity multiplier</code> to give <em>km / l</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from make and hybridity multiplier&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:make</span><span class="p">,</span> <span class="ss">:hybridity_multiplier</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:make</span><span class="o">].</span><span class="n">fuel_efficiency</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:hybridity_multiplier</span><span class="o">]</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-51'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-51">&#182;</a>
        </div>
        <p>Otherwise look up the <a href="http://data.brighterplanet.com/countries">United States</a> average automobile fuel efficiency (<em>km / l</em>).
Multiply by <code>hybridity multiplier</code> to give <em>km / l</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from hybridity multiplier&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:hybridity_multiplier</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="no">Country</span><span class="o">.</span><span class="n">united_states</span><span class="o">.</span><span class="n">automobile_fuel_efficiency</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:hybridity_multiplier</span><span class="o">]</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Hybridity_multiplier_(&lt;em&gt;dimensionless&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Hybridity_multiplier_(&lt;em&gt;dimensionless&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Hybridity multiplier (<em>dimensionless</em>)</h3>

<p><em>A multiplier used to adjust fuel efficiency if we know the automobile is a hybrid or conventional vehicle.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:hybridity_multiplier</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-53'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-53">&#182;</a>
        </div>
        <p>Check whether the <code>size class</code> has <code>hybridity</code> multipliers for city and highway fuel efficiency.
If it does, calculate the harmonic mean of those multipliers, weighted by <code>urbanity</code>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from size class, hybridity, and urbanity&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:size_class</span><span class="p">,</span> <span class="ss">:hybridity</span><span class="p">,</span> <span class="ss">:urbanity</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">drivetrain</span> <span class="o">=</span> <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:hybridity</span><span class="o">]</span> <span class="o">==</span> <span class="kp">true</span><span class="p">)</span> <span class="p">?</span> <span class="ss">:hybrid</span> <span class="p">:</span> <span class="ss">:conventional</span>
                <span class="n">city_multiplier</span>    <span class="o">=</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:size_class</span><span class="o">].</span><span class="n">send</span><span class="p">(</span><span class="ss">:&quot;</span><span class="si">#{</span><span class="n">drivetrain</span><span class="si">}</span><span class="ss">_fuel_efficiency_city_multiplier&quot;</span><span class="p">)</span>
                <span class="n">highway_multiplier</span> <span class="o">=</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:size_class</span><span class="o">].</span><span class="n">send</span><span class="p">(</span><span class="ss">:&quot;</span><span class="si">#{</span><span class="n">drivetrain</span><span class="si">}</span><span class="ss">_fuel_efficiency_highway_multiplier&quot;</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">city_multiplier</span> <span class="ow">and</span> <span class="n">highway_multiplier</span>
                  <span class="mi">1</span><span class="o">.</span><span class="mi">0</span> <span class="o">/</span> <span class="p">((</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:urbanity</span><span class="o">]</span> <span class="o">/</span> <span class="n">city_multiplier</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:urbanity</span><span class="o">]</span><span class="p">)</span> <span class="o">/</span> <span class="n">highway_multiplier</span><span class="p">))</span>
                <span class="k">end</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-54'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-54">&#182;</a>
        </div>
        <p>Otherwise look up the average <a href="http://data.brighterplanet.com/automobile_size_classes">size class</a> <code>hybridity</code> multipliers for city and highway fuel efficiency.
Calculate the harmonic mean of those multipliers, weighted by <code>urbanity</code>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from hybridity and urbanity&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:hybridity</span><span class="p">,</span> <span class="ss">:urbanity</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">drivetrain</span> <span class="o">=</span> <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:hybridity</span><span class="o">]</span> <span class="o">==</span> <span class="kp">true</span><span class="p">)</span> <span class="p">?</span> <span class="ss">:hybrid</span> <span class="p">:</span> <span class="ss">:conventional</span>
                <span class="n">urbanity</span> <span class="o">=</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:urbanity</span><span class="o">]</span>
                <span class="n">fuel_efficiency_multipliers</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="ss">:city</span> <span class="o">=&gt;</span> <span class="no">AutomobileSizeClass</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="ss">:&quot;</span><span class="si">#{</span><span class="n">drivetrain</span><span class="si">}</span><span class="ss">_fuel_efficiency_city_multiplier&quot;</span><span class="p">),</span>
                  <span class="ss">:highway</span> <span class="o">=&gt;</span> <span class="no">AutomobileSizeClass</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="ss">:&quot;</span><span class="si">#{</span><span class="n">drivetrain</span><span class="si">}</span><span class="ss">_fuel_efficiency_highway_multiplier&quot;</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="mi">1</span><span class="o">.</span><span class="mi">0</span> <span class="o">/</span> <span class="p">((</span><span class="n">urbanity</span> <span class="o">/</span> <span class="n">fuel_efficiency_multipliers</span><span class="o">[</span><span class="ss">:city</span><span class="o">]</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">urbanity</span><span class="p">)</span> <span class="o">/</span> <span class="n">fuel_efficiency_multipliers</span><span class="o">[</span><span class="ss">:highway</span><span class="o">]</span><span class="p">))</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-55'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-55">&#182;</a>
        </div>
        <p>Otherwise use a multiplier of 1.0.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span>
                <span class="mi">1</span><span class="o">.</span><span class="mi">0</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Hybridity_(&lt;em&gt;boolean&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Hybridity_(&lt;em&gt;boolean&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Hybridity (<em>boolean</em>)</h3>

<p><em>True if the automobile is a hybrid vehicle. False if the automobile is a conventional vehicle.</em></p>

<p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Size_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Size_class">&#182;</a>
        </div>
        <h3>Size class</h3>

<p><em>The automobile&rsquo;s <a href="http://data.brighterplanet.com/automobile_size_classes">size class</a>.</em></p>

<p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Urbanity_(&lt;em&gt;%&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Urbanity_(&lt;em&gt;%&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Urbanity (<em>%</em>)</h3>

<p><em>The fraction of the total distance driven that is in towns and cities rather than highways.</em>
Highways are defined as all driving at speeds of 45 miles per hour or greater.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:urbanity</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-59'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-59">&#182;</a>
        </div>
        <p>Use the <a href="http://data.brighterplanet.com/countries">United States</a> average automobile urbanity (<em>%</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span>
                <span class="no">Country</span><span class="o">.</span><span class="n">united_states</span><span class="o">.</span><span class="n">automobile_urbanity</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Active_subtimeframe_(&lt;em&gt;date_range&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Active_subtimeframe_(&lt;em&gt;date_range&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Active subtimeframe (<em>date range</em>)</h3>

<p><em>The portion of <code>timeframe</code> that falls between <code>acquisition</code> and <code>retirement</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:active_subtimeframe</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-61'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-61">&#182;</a>
        </div>
        <p>Calculate the portion of <code>timeframe</code> that falls between <code>acqusition</code> and <code>retirement</code> (<em>date range</em>).
If there is no overlap then we don&rsquo;t know active subtimeframe.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from acquisition and retirement&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:acquisition</span><span class="p">,</span> <span class="ss">:retirement</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">|</span>
                <span class="no">Timeframe</span><span class="o">.</span><span class="n">constrained_new</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:acquisition</span><span class="o">].</span><span class="n">to_date</span><span class="p">,</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:retirement</span><span class="o">].</span><span class="n">to_date</span><span class="p">,</span> <span class="n">timeframe</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Acquisition_(&lt;em&gt;date&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Acquisition_(&lt;em&gt;date&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Acquisition (<em>date</em>)</h3>

<p><em>The date the automobile was put into use.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:acquisition</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-63'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-63">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-64'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-64">&#182;</a>
        </div>
        <p>Otherwise use the first day of <code>year</code> (<em>date</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from year&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:year</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="no">Date</span><span class="o">.</span><span class="n">new</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:year</span><span class="o">].</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-65'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-65">&#182;</a>
        </div>
        <p>Otherwise use whichever is earlier: the first day of <code>timeframe</code> or <code>retirement</code>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="ss">:appreciates</span> <span class="o">=&gt;</span> <span class="ss">:retirement</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">|</span>
                <span class="o">[</span> <span class="n">timeframe</span><span class="o">.</span><span class="n">from</span><span class="p">,</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:retirement</span><span class="o">]</span> <span class="o">].</span><span class="n">compact</span><span class="o">.</span><span class="n">min</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Retirement_(&lt;em&gt;date&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Retirement_(&lt;em&gt;date&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Retirement (<em>date</em>)</h3>

<p><em>The date the automobile was taken out of use.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:retirement</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-67'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-67">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-68'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-68">&#182;</a>
        </div>
        <p>Otherwise use whichever is later: the last day of <code>timeframe</code> or <code>acquisition</code> (if we know it).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="ss">:appreciates</span> <span class="o">=&gt;</span> <span class="ss">:acquisition</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">|</span>
                <span class="o">[</span> <span class="n">timeframe</span><span class="o">.</span><span class="n">to</span><span class="p">,</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:acquisition</span><span class="o">]</span> <span class="o">].</span><span class="n">compact</span><span class="o">.</span><span class="n">max</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Make_model_year'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Make_model_year">&#182;</a>
        </div>
        <h3>Make model year</h3>

<p><em>The automobile&rsquo;s <a href="http://data.brighterplanet.com/automobile_make_model_years">make, model, and year</a>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:make_model_year</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-70'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-70">&#182;</a>
        </div>
        <p>Check whether the <code>make</code>, <code>model</code>, and <code>year</code> combination matches any automobiles in our database.
If it doesn&rsquo;t then we don&rsquo;t know make model year.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from make, model, and year&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:make</span><span class="p">,</span> <span class="ss">:model</span><span class="p">,</span> <span class="ss">:year</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="no">AutomobileMakeModelYear</span><span class="o">.</span><span class="n">find_by_make_name_and_model_name_and_year</span><span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:make</span><span class="o">].</span><span class="n">name</span><span class="p">,</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:model</span><span class="o">].</span><span class="n">name</span><span class="p">,</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:year</span><span class="o">].</span><span class="n">year</span><span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Make_year'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Make_year">&#182;</a>
        </div>
        <h3>Make year</h3>

<p><em>The automobile&rsquo;s <a href="http://data.brighterplanet.com/automobile_make_years">make and year</a>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:make_year</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-72'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-72">&#182;</a>
        </div>
        <p>Check whether the <code>make</code> and <code>year</code> combination matches any automobiles in our database.
If it doesn&rsquo;t then we don&rsquo;t know make year.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from make and year&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:make</span><span class="p">,</span> <span class="ss">:year</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="no">AutomobileMakeYear</span><span class="o">.</span><span class="n">find_by_make_name_and_year</span><span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:make</span><span class="o">].</span><span class="n">name</span><span class="p">,</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:year</span><span class="o">].</span><span class="n">year</span><span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Make_model'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Make_model">&#182;</a>
        </div>
        <h3>Make model</h3>

<p><em>The automobile&rsquo;s <a href="http://data.brighterplanet.com/automobile_make_models">make and model</a>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:make_model</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-74'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-74">&#182;</a>
        </div>
        <p>Check whether the <code>make</code> and <code>model</code> combination matches any automobiles in our database.
If it doesn&rsquo;t then we don&rsquo;t know make model.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from make and model&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:make</span><span class="p">,</span> <span class="ss">:model</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_1</span><span class="p">,</span> <span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="no">AutomobileMakeModel</span><span class="o">.</span><span class="n">find_by_make_name_and_model_name</span><span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:make</span><span class="o">].</span><span class="n">name</span><span class="p">,</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:model</span><span class="o">].</span><span class="n">name</span><span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Year'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Year">&#182;</a>
        </div>
        <h3>Year</h3>

<p><em>The automobile&rsquo;s <a href="http://data.brighterplanet.com/automobile_years">year of manufacture</a>.</em></p>

<p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Model'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Model">&#182;</a>
        </div>
        <h3>Model</h3>

<p><em>The automobile&rsquo;s <a href="http://data.brighterplanet.com/automobile_models">model</a>.</em></p>

<p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Make'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Make">&#182;</a>
        </div>
        <h3>Make</h3>

<p><em>The automobile&rsquo;s <a href="http://data.brighterplanet.com/automobile_makes">make</a>.</em></p>

<p>Use client input, if available.</p>

      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
